const c="ticketapp_tickets_v1";function o(){try{const t=localStorage.getItem(c);return t?JSON.parse(t):[]}catch{return[]}}function s(t){localStorage.setItem(c,JSON.stringify(t))}function a({title:t,status:e,description:r=""}){if(!t||t.trim()==="")throw new Error("Title is required");if(!["open","in_progress","closed"].includes(e))throw new Error("Invalid status");const n=o(),i={id:Date.now().toString(),title:t,status:e,description:r,createdAt:new Date().toISOString()};return n.unshift(i),s(n),n}function u(t,e){const r=o(),n=r.findIndex(i=>i.id===t);if(n===-1)throw new Error("Ticket not found");if(e.title==="")throw new Error("Title is required");if(e.status&&!["open","in_progress","closed"].includes(e.status))throw new Error("Invalid status");return r[n]={...r[n],...e,updatedAt:new Date().toISOString()},s(r),r}function d(t){const e=o().filter(r=>r.id!==t);return s(e),e}export{a as c,d,o as l,u};
