import{_ as h,c as a,a as o,n as e,t as n,f as v,h as b,g as y,v as u,p as T,F as w,e as D,i as x,k as C,s as S,o as s}from"./index-rG6iVv9p.js";import{l as m,d as z,u as E,c as R}from"./ticketStore-B6gDyQ7i.js";const B={name:"Tickets",setup(){const p=x([]),i=x({title:"",status:"open",description:""}),c=x(null),t=x({});C(()=>{p.value=m()});const f=l=>{const d={};return(!l.title||l.title.trim()==="")&&(d.title="Title is required"),["open","in_progress","closed"].includes(l.status)||(d.status="Status must be open, in_progress, or closed"),l.description&&l.description.length>1e3&&(d.description="Description is too long (max 1000 characters)"),d};return{tickets:p,form:i,editingId:c,errors:t,handleSubmit:()=>{const l=f(i.value);if(t.value=l,!(Object.keys(l).length>0))try{c.value?(E(c.value,i.value),S("Ticket updated successfully")):(R(i.value),S("Ticket created successfully")),p.value=m(),i.value={title:"",status:"open",description:""},c.value=null,t.value={}}catch(d){S(d.message,"error")}},handleEdit:l=>{c.value=l.id,i.value={title:l.title,status:l.status,description:l.description||""},window.scrollTo({top:0,behavior:"smooth"})},handleDelete:l=>{if(confirm("Are you sure you want to delete this ticket?"))try{z(l),p.value=m(),S("Ticket deleted successfully")}catch{S("Failed to delete ticket","error")}},cancelEdit:()=>{c.value=null,i.value={title:"",status:"open",description:""},t.value={}},getStatusBadgeStyle:l=>({display:"inline-block",padding:"4px 12px",borderRadius:"12px",background:{open:"#10b981",in_progress:"#f59e0b",closed:"#6b7280"}[l],color:"white",fontSize:"12px",fontWeight:"600",textTransform:"capitalize",marginTop:"8px"}),formatStatus:l=>l.replace("_"," "),formatDate:l=>new Date(l).toLocaleString(),containerStyle:{maxWidth:"1440px",margin:"60px auto",padding:"0 20px"},titleStyle:{marginBottom:"32px",color:"#1f2937"},cardStyle:{background:"white",padding:"32px",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",marginBottom:"32px"},formTitleStyle:{marginBottom:"20px",color:"#1f2937"},formRowStyle:{marginBottom:"16px"},labelStyle:{display:"block",marginBottom:"6px",fontWeight:"600",color:"#374151"},inputStyle:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"16px",boxSizing:"border-box"},textareaStyle:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"16px",boxSizing:"border-box",fontFamily:"inherit",resize:"vertical"},errorStyle:{color:"#ef4444",fontSize:"14px",display:"block",marginTop:"4px"},btnGroupStyle:{display:"flex",gap:"12px",flexWrap:"wrap"},btnPrimaryStyle:{padding:"12px 24px",background:"#006400",color:"white",border:"none",borderRadius:"6px",fontWeight:"600",cursor:"pointer",fontSize:"16px"},btnSecondaryStyle:{padding:"12px 24px",background:"#6b7280",color:"white",border:"none",borderRadius:"6px",fontWeight:"600",cursor:"pointer",fontSize:"16px"},listTitleStyle:{marginBottom:"20px",color:"#1f2937"},noTicketsStyle:{textAlign:"center",color:"#6b7280",padding:"40px",background:"white",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},ticketsGridStyle:{display:"grid",gap:"16px"},ticketCardStyle:{background:"white",padding:"24px",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"20px",flexWrap:"wrap"},ticketContentStyle:{flex:1,minWidth:"250px"},ticketTitleStyle:{marginBottom:"8px",fontSize:"1.2rem",color:"#1f2937"},ticketDescStyle:{marginTop:"12px",color:"#6b7280",lineHeight:"1.6"},ticketDateStyle:{display:"block",marginTop:"12px",color:"#9ca3af",fontSize:"14px"},ticketActionsStyle:{display:"flex",gap:"8px",flexWrap:"wrap"},btnEditStyle:{padding:"8px 16px",background:"#f59e0b",color:"white",border:"none",borderRadius:"6px",fontWeight:"600",cursor:"pointer",fontSize:"14px"},btnDeleteStyle:{padding:"8px 16px",background:"#ef4444",color:"white",border:"none",borderRadius:"6px",fontWeight:"600",cursor:"pointer",fontSize:"14px"}}}},W={style:{marginTop:"32px"}},_=["onClick"],A=["onClick"];function I(p,i,c,t,f,k){return s(),a("section",{style:e(t.containerStyle)},[o("h2",{style:e(t.titleStyle)},"Ticket Management",4),o("div",{style:e(t.cardStyle)},[o("h3",{style:e(t.formTitleStyle)},n(t.editingId?"Edit Ticket":"Create New Ticket"),5),o("form",{onSubmit:i[4]||(i[4]=v((...r)=>t.handleSubmit&&t.handleSubmit(...r),["prevent"]))},[o("div",{style:e(t.formRowStyle)},[o("label",{style:e(t.labelStyle)},"Title *",4),b(o("input",{type:"text","onUpdate:modelValue":i[0]||(i[0]=r=>t.form.title=r),style:e(t.inputStyle),placeholder:"Enter ticket title"},null,4),[[u,t.form.title]]),t.errors.title?(s(),a("small",{key:0,style:e(t.errorStyle)},n(t.errors.title),5)):y("",!0)],4),o("div",{style:e(t.formRowStyle)},[o("label",{style:e(t.labelStyle)},"Status *",4),b(o("select",{"onUpdate:modelValue":i[1]||(i[1]=r=>t.form.status=r),style:e(t.inputStyle)},[...i[5]||(i[5]=[o("option",{value:"open"},"Open",-1),o("option",{value:"in_progress"},"In Progress",-1),o("option",{value:"closed"},"Closed",-1)])],4),[[T,t.form.status]]),t.errors.status?(s(),a("small",{key:0,style:e(t.errorStyle)},n(t.errors.status),5)):y("",!0)],4),o("div",{style:e(t.formRowStyle)},[o("label",{style:e(t.labelStyle)},"Description",4),b(o("textarea",{"onUpdate:modelValue":i[2]||(i[2]=r=>t.form.description=r),rows:"4",style:e(t.textareaStyle),placeholder:"Enter ticket description (optional)"},null,4),[[u,t.form.description]]),t.errors.description?(s(),a("small",{key:0,style:e(t.errorStyle)},n(t.errors.description),5)):y("",!0)],4),o("div",{style:e(t.btnGroupStyle)},[o("button",{type:"submit",style:e(t.btnPrimaryStyle)},n(t.editingId?"Update Ticket":"Create Ticket"),5),t.editingId?(s(),a("button",{key:0,type:"button",onClick:i[3]||(i[3]=(...r)=>t.cancelEdit&&t.cancelEdit(...r)),style:e(t.btnSecondaryStyle)}," Cancel ",4)):y("",!0)],4)],32)],4),o("div",W,[o("h3",{style:e(t.listTitleStyle)},"All Tickets ("+n(t.tickets.length)+")",5),t.tickets.length===0?(s(),a("p",{key:0,style:e(t.noTicketsStyle)}," No tickets yet. Create your first ticket above! ",4)):y("",!0),o("div",{style:e(t.ticketsGridStyle)},[(s(!0),a(w,null,D(t.tickets,r=>(s(),a("div",{key:r.id,style:e(t.ticketCardStyle)},[o("div",{style:e(t.ticketContentStyle)},[o("h4",{style:e(t.ticketTitleStyle)},n(r.title),5),o("span",{style:e(t.getStatusBadgeStyle(r.status))},n(t.formatStatus(r.status)),5),r.description?(s(),a("p",{key:0,style:e(t.ticketDescStyle)},n(r.description),5)):y("",!0),o("small",{style:e(t.ticketDateStyle)}," Created: "+n(t.formatDate(r.createdAt)),5)],4),o("div",{style:e(t.ticketActionsStyle)},[o("button",{onClick:g=>t.handleEdit(r),style:e(t.btnEditStyle)}," Edit ",12,_),o("button",{onClick:g=>t.handleDelete(r.id),style:e(t.btnDeleteStyle)}," Delete ",12,A)],4)],4))),128))],4)])],4)}const ct=h(B,[["render",I],["__scopeId","data-v-54f21a74"]]);export{ct as default};
